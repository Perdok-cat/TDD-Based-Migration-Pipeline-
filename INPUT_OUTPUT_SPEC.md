# ğŸ“¥ğŸ“¤ Äáº·c táº£ Äáº§u vÃ o vÃ  Äáº§u ra

## ğŸ“¥ Äáº¦U VÃ€O (INPUT)

### 1. Input chÃ­nh: C Source Files

**Äá»‹nh dáº¡ng**: `.c` files (C source code)

**VÃ­ dá»¥ input**:

```c
// calculator.c
#include <stdio.h>

int add(int a, int b) {
    return a + b;
}

int subtract(int a, int b) {
    return a - b;
}

int main() {
    printf("5 + 3 = %d\n", add(5, 3));
    printf("5 - 3 = %d\n", subtract(5, 3));
    return 0;
}
```

**Cáº¥u trÃºc thÆ° má»¥c input**:
```
input_directory/
â”œâ”€â”€ module_a.c          # C source file 1
â”œâ”€â”€ module_b.c          # C source file 2 (cÃ³ thá»ƒ phá»¥ thuá»™c vÃ o module_a)
â”œâ”€â”€ module_c.c          # C source file 3
â”œâ”€â”€ utils.h             # C header file (optional)
â””â”€â”€ data_structures.c   # C source file 4
```

**YÃªu cáº§u**:
- âœ… Valid C code (cÃ³ thá»ƒ compile vá»›i GCC)
- âœ… Standard C (C89, C99, C11)
- âœ… CÃ³ hoáº·c khÃ´ng cÃ³ header files (.h)
- âœ… CÃ³ hoáº·c khÃ´ng cÃ³ dependencies giá»¯a cÃ¡c files

---

### 2. Input phá»¥ (Optional)

#### 2.1. Configuration File (`config.yaml`)
```yaml
migration:
  max_retries: 3
  parallel_execution: false

compiler:
  c_compiler: gcc
  csharp_compiler: dotnet

test_generation:
  auto_generate: true
  tests_per_function: 5
  
validation:
  floating_point_tolerance: 1.0e-6
```

#### 2.2. Test Specifications (Optional)
Náº¿u muá»‘n custom test cases thay vÃ¬ auto-generate:

```yaml
# test_specs.yaml
calculator:
  add:
    - inputs: {a: 5, b: 3}
      expected: 8
    - inputs: {a: -5, b: 3}
      expected: -2
    - inputs: {a: 0, b: 0}
      expected: 0
  
  divide:
    - inputs: {a: 10, b: 2}
      expected: 5.0
    - inputs: {a: 5, b: 0}
      expected: 0.0  # Handle division by zero
```

---

## ğŸ“¤ Äáº¦U RA (OUTPUT)

### 1. Output chÃ­nh: Converted C# Code

**Äá»‹nh dáº¡ng**: `.cs` files (C# source code)

**VÃ­ dá»¥ output**:

```csharp
// calculator.cs
using System;

namespace MigratedCode
{
    public class Calculator
    {
        public static int Add(int a, int b)
        {
            return a + b;
        }

        public static int Subtract(int a, int b)
        {
            return a - b;
        }

        public static void Main(string[] args)
        {
            Console.WriteLine($"5 + 3 = {Add(5, 3)}");
            Console.WriteLine($"5 - 3 = {Subtract(5, 3)}");
        }
    }
}
```

**Cáº¥u trÃºc thÆ° má»¥c output**:
```
output/
â”œâ”€â”€ converted/                    # âœ… Converted C# files
â”‚   â”œâ”€â”€ module_a.cs
â”‚   â”œâ”€â”€ module_b.cs
â”‚   â”œâ”€â”€ module_c.cs
â”‚   â””â”€â”€ data_structures.cs
â”‚
â”œâ”€â”€ reports/                      # ğŸ“Š Migration reports
â”‚   â”œâ”€â”€ migration_report.html    # HTML report vá»›i visualizations
â”‚   â”œâ”€â”€ migration_report.json    # JSON report cho automation
â”‚   â””â”€â”€ migration_report.md      # Markdown summary
â”‚
â”œâ”€â”€ test_results/                 # ğŸ§ª Test results
â”‚   â”œâ”€â”€ c_test_results.json      # C baseline test results
â”‚   â”œâ”€â”€ csharp_test_results.json # C# test results
â”‚   â””â”€â”€ validation_results.json  # Comparison results
â”‚
â”œâ”€â”€ logs/                         # ğŸ“ Logs
â”‚   â”œâ”€â”€ migration.log            # Main log
â”‚   â”œâ”€â”€ parser.log               # Parser logs
â”‚   â”œâ”€â”€ converter.log            # Converter logs
â”‚   â””â”€â”€ validator.log            # Validator logs
â”‚
â””â”€â”€ temp/                         # ğŸ—‚ï¸ Temporary files (optional)
    â”œâ”€â”€ test_harness_c/          # C test harness files
    â””â”€â”€ test_harness_csharp/     # C# test harness files
```

---

### 2. Detailed Output Components

#### 2.1. Converted C# Files (`output/converted/`)

**Format**: `.cs` files

**Contents**:
- âœ… Valid C# code (cÃ³ thá»ƒ compile vá»›i dotnet/csc)
- âœ… Namespace vÃ  class structure
- âœ… Converted functions vá»›i proper C# syntax
- âœ… Type conversions (int* â†’ ref int, struct â†’ class, etc.)
- âœ… Comments explaining conversion decisions

**Example**:
```csharp
using System;

namespace MigratedCode
{
    /// <summary>
    /// Converted from calculator.c
    /// Auto-generated by C to C# Migration Pipeline
    /// </summary>
    public class Calculator
    {
        // Original C function: int add(int a, int b)
        public static int Add(int a, int b)
        {
            return a + b;
        }
    }
}
```

---

#### 2.2. HTML Report (`output/reports/migration_report.html`)

**Format**: HTML vá»›i CSS vÃ  JavaScript

**Contents**:
- ğŸ“Š **Summary Statistics**
  - Total programs converted
  - Success/failure rate
  - Test pass rate
  - Lines of code (C vs C#)
  
- ğŸ“ˆ **Charts & Visualizations**
  - Dependency graph visualization
  - Test results pie chart
  - Conversion progress timeline
  
- ğŸ“ **Per-Component Details**
  - Component name
  - Status (success/failed)
  - Number of functions converted
  - Test results
  - Issues/warnings
  
- ğŸ› **Issues & Warnings**
  - Compilation errors
  - Test failures
  - Type conversion warnings
  - Suggestions for manual fixes

**Example structure**:
```html
<!DOCTYPE html>
<html>
<head>
    <title>Migration Report</title>
    <style>/* Beautiful CSS */</style>
</head>
<body>
    <h1>C to C# Migration Report</h1>
    
    <section id="summary">
        <h2>Summary</h2>
        <div class="stat-card">
            <h3>Programs Converted</h3>
            <p class="big-number">8 / 10</p>
            <p class="subtitle">80% Success Rate</p>
        </div>
        <!-- More stats -->
    </section>
    
    <section id="components">
        <h2>Components</h2>
        <table>
            <tr>
                <th>Component</th>
                <th>Status</th>
                <th>Tests</th>
                <th>Issues</th>
            </tr>
            <tr class="success">
                <td>calculator.c</td>
                <td>âœ… Success</td>
                <td>10/10 passed</td>
                <td>0 errors, 1 warning</td>
            </tr>
            <!-- More rows -->
        </table>
    </section>
</body>
</html>
```

---

#### 2.3. JSON Report (`output/reports/migration_report.json`)

**Format**: JSON

**Purpose**: Machine-readable report cho automation, CI/CD integration

**Structure**:
```json
{
  "summary": {
    "total_programs": 10,
    "converted": 8,
    "failed": 2,
    "skipped": 0,
    "success_rate": 80.0,
    "test_pass_rate": 85.5
  },
  "metrics": {
    "total_loc_c": 1500,
    "total_loc_csharp": 1650,
    "total_functions": 45,
    "total_tests": 150,
    "total_tests_passed": 128
  },
  "duration_seconds": 45.6,
  "timestamp": "2025-10-05T10:30:00Z",
  "results": [
    {
      "program_id": "calculator",
      "status": "success",
      "source_file": "calculator.c",
      "target_file": "calculator.cs",
      "issues": {
        "errors": 0,
        "warnings": 1,
        "details": [
          "[WARNING] divide(): Potential division by zero not handled"
        ]
      },
      "metrics": {
        "loc_c": 77,
        "loc_csharp": 92,
        "functions": "6/6",
        "tests": {
          "total": 10,
          "passed": 10,
          "failed": 0,
          "pass_rate": 100.0
        }
      }
    }
    // More results...
  ]
}
```

---

#### 2.4. Markdown Summary (`output/reports/migration_report.md`)

**Format**: Markdown

**Purpose**: Quick summary, easy to read vÃ  share

**Example**:
```markdown
# C to C# Migration Report

**Date**: 2025-10-05  
**Duration**: 45.6 seconds

## Summary

- **Programs**: 8/10 converted (80%)
- **Functions**: 45 total
- **Lines of Code**: 1,500 (C) â†’ 1,650 (C#)
- **Tests**: 128/150 passed (85.5%)

## Results

### âœ… calculator.c
- **Status**: Success
- **Functions**: 6/6 converted
- **Tests**: 10/10 passed (100%)
- **Issues**: 0 errors, 1 warning

### âœ… data_structures.c
- **Status**: Success
- **Functions**: 8/8 converted
- **Tests**: 15/15 passed (100%)
- **Issues**: 0 errors, 0 warnings

### âœ— complex_module.c
- **Status**: Failed
- **Functions**: 10/12 converted
- **Tests**: 18/25 passed (72%)
- **Issues**: 2 errors, 3 warnings

**Errors**:
1. `processData()`: Output mismatch (C: 42, C#: 43)
2. `calculateSum()`: Compilation error in C# code

## Recommendations

1. Review failed components manually
2. Check warnings for potential issues
3. Run additional tests for edge cases
```

---

#### 2.5. Test Results (`output/test_results/`)

**Files**:
- `c_test_results.json` - C baseline outputs
- `csharp_test_results.json` - C# outputs
- `validation_results.json` - Comparison results

**validation_results.json example**:
```json
{
  "calculator": {
    "total_tests": 10,
    "passed": 10,
    "failed": 0,
    "details": [
      {
        "test_id": "test_add_001",
        "test_name": "add(5, 3)",
        "is_match": true,
        "c_output": {"return": 8},
        "csharp_output": {"return": 8},
        "differences": []
      },
      {
        "test_id": "test_divide_003",
        "test_name": "divide(5, 0)",
        "is_match": true,
        "c_output": {"return": 0.0, "stdout": "Error: Division by zero\n"},
        "csharp_output": {"return": 0.0, "stdout": "Error: Division by zero\n"},
        "differences": []
      }
    ]
  }
}
```

---

#### 2.6. Log Files (`output/logs/`)

**migration.log example**:
```
[2025-10-05 10:30:00] INFO: Starting C to C# Migration Pipeline
[2025-10-05 10:30:01] INFO: [Step 1] Parsing C programs...
[2025-10-05 10:30:02] INFO: âœ“ Found 10 C programs
[2025-10-05 10:30:02] INFO: [Step 2] Analyzing dependencies...
[2025-10-05 10:30:03] INFO: âœ“ No circular dependencies found
[2025-10-05 10:30:03] INFO: [Step 3] Determining conversion order...
[2025-10-05 10:30:03] INFO: âœ“ Conversion order: module_a â†’ module_b â†’ calculator
[2025-10-05 10:30:03] INFO: [Step 4] Starting conversion loop...
[2025-10-05 10:30:04] INFO: [1/10] Processing: calculator
[2025-10-05 10:30:04] INFO:   â†’ Generating test cases...
[2025-10-05 10:30:04] INFO:     Generated 10 test cases
[2025-10-05 10:30:05] INFO:   â†’ Running C tests (baseline)...
[2025-10-05 10:30:06] INFO:     C tests completed
[2025-10-05 10:30:06] INFO:   â†’ Converting C to C#...
[2025-10-05 10:30:07] INFO:     Conversion completed
[2025-10-05 10:30:07] INFO:   â†’ Running C# tests...
[2025-10-05 10:30:08] INFO:     C# tests completed
[2025-10-05 10:30:08] INFO:   â†’ Validating outputs (C vs C#)...
[2025-10-05 10:30:08] INFO:     Validation: 10/10 tests passed (100.0%)
[2025-10-05 10:30:08] INFO:   âœ“ All tests passed!
[2025-10-05 10:30:08] INFO: âœ“ calculator: Conversion successful (1 warning)
// ... more logs
```

---

## ğŸ¯ Input/Output Flow

### Complete Flow:

```
INPUT                        PROCESS                         OUTPUT
â”â”â”â”â”                        â”â”â”â”â”â”â”                         â”â”â”â”â”â”

ğŸ“ C Source Files      â†’    ğŸ” Parse                    â†’   ğŸ“„ C# Files
  â”œâ”€ calculator.c           â”‚                                â”œâ”€ calculator.cs
  â”œâ”€ module_a.c             â”œâ”€ Analyze Dependencies          â”œâ”€ module_a.cs
  â””â”€ module_b.c             â”‚                                â””â”€ module_b.cs
                            â”œâ”€ Generate Tests            
ğŸ“„ config.yaml (opt)   â†’    â”‚                            â†’   ğŸ“Š Reports
                            â”œâ”€ Run C Tests                   â”œâ”€ .html
ğŸ“„ test_specs.yaml(opt)â†’    â”‚                                â”œâ”€ .json
                            â”œâ”€ Convert C â†’ C#                â””â”€ .md
                            â”‚
                            â”œâ”€ Run C# Tests              â†’   ğŸ§ª Test Results
                            â”‚                                â”œâ”€ c_test_results.json
                            â”œâ”€ Validate                      â”œâ”€ csharp_test_results.json
                            â”‚                                â””â”€ validation_results.json
                            â””â”€ Generate Report           
                                                         â†’   ğŸ“ Logs
                                                             â”œâ”€ migration.log
                                                             â””â”€ *.log
```

---

## ğŸ“‹ Summary Table

| Category | Type | Format | Required? | Description |
|----------|------|--------|-----------|-------------|
| **INPUT** | Source Code | `.c` | âœ… Yes | C source files to convert |
| | Configuration | `.yaml` | âŒ No | Custom settings |
| | Test Specs | `.yaml` | âŒ No | Custom test cases |
| **OUTPUT** | Converted Code | `.cs` | âœ… Yes | C# converted files |
| | HTML Report | `.html` | âœ… Yes | Visual report |
| | JSON Report | `.json` | âœ… Yes | Machine-readable report |
| | Markdown Summary | `.md` | âœ… Yes | Quick summary |
| | Test Results | `.json` | âœ… Yes | Test execution results |
| | Logs | `.log` | âœ… Yes | Detailed logs |

---

## ğŸ’¡ Usage Examples

### Example 1: Simple Conversion

**Command**:
```bash
python main.py migrate -i examples/c_samples -o output/converted
```

**Input**:
```
examples/c_samples/
â””â”€â”€ calculator.c
```

**Output**:
```
output/
â”œâ”€â”€ converted/
â”‚   â””â”€â”€ calculator.cs               â† Converted C# code
â”œâ”€â”€ reports/
â”‚   â”œâ”€â”€ migration_report.html       â† Visual report
â”‚   â”œâ”€â”€ migration_report.json       â† Data for CI/CD
â”‚   â””â”€â”€ migration_report.md         â† Quick summary
â”œâ”€â”€ test_results/
â”‚   â”œâ”€â”€ c_test_results.json
â”‚   â”œâ”€â”€ csharp_test_results.json
â”‚   â””â”€â”€ validation_results.json
â””â”€â”€ logs/
    â””â”€â”€ migration.log
```

---

### Example 2: With Custom Configuration

**Command**:
```bash
python main.py migrate \
  -i src/legacy_c_code \
  -o output/migrated \
  --config config/custom.yaml \
  --max-retries 5
```

**Input**:
```
src/legacy_c_code/
â”œâ”€â”€ module_a.c
â”œâ”€â”€ module_b.c
â””â”€â”€ utils.c

config/custom.yaml
```

**Output**: Same structure as Example 1, plus:
- Multiple C# files (one per C file)
- Dependency-aware conversion order
- More detailed reports

---

## âœ… Success Criteria

### Input Validation:
- âœ… C files must be valid C code
- âœ… Files must compile with GCC (or configured compiler)
- âœ… Dependencies must be resolvable (no missing includes)

### Output Quality:
- âœ… C# code must compile vá»›i dotnet/csc
- âœ… Test pass rate â‰¥ 90% (configurable)
- âœ… No critical issues
- âœ… All reports generated successfully

---

## ğŸ” Inspecting Outputs

### View Converted Code:
```bash
cat output/converted/calculator.cs
```

### View HTML Report:
```bash
# Open in browser
xdg-open output/reports/migration_report.html  # Linux
open output/reports/migration_report.html      # Mac
start output/reports/migration_report.html     # Windows
```

### Check Test Results:
```bash
cat output/test_results/validation_results.json | jq '.'
```

### Review Logs:
```bash
tail -f output/logs/migration.log
```

---

## ğŸ“ Next Steps

1. âœ… Understand input/output structure
2. â³ Prepare C source files
3. â³ Run migration
4. â³ Review outputs and reports
5. â³ Fix any issues based on reports
6. â³ Iterate until all conversions successful

---

**Created**: 2025-10-05  
**Version**: 1.0.0

